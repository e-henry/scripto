<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Scripts Status</title>

  <!-- Bootstrap -->
  <link href="/static/css/bootstrap.min.css" rel="stylesheet">
  <link href="/static/css/grid.css" rel="stylesheet">
  <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}">

  <script src="/static/js/moment.min.js"></script>
  <script>
    moment.locale('en', {
    calendar : {
        lastDay : '[Yesterday at] HH:mm:ss',
        sameDay : '[Today at] HH:mm:ss',
        nextDay : '[Tomorrow at] HH:mm:ss',
        lastWeek : '[last] dddd [at] HH:mm:ss',
        nextWeek : 'dddd [at] HH:mm:ss',
        sameElse : 'ddd, D MMM YYYY, HH:mm:ss'
      }
    });
  </script>
</head>

<body>
  <div class="container">
    <div class="page-header">
      <h1>Scripts</h1>
      <p class="lead">Last execution of scripts.</p>
    </div>

    {% for script in scripts %}
    <div class="row">
      <div class="col-md-1">
      {% if script.status %}
        <span class="label label-success">Success</span>
      {% else %}
        <span class="label label-danger">Failed</span>
      {% endif %}
      </div>
      <div class="col-md-1">{{ script.id }}</div>
      <div class="col-md-2">{{ script.name }}</div>
      <div class="col-md-3">{{ script.server }}</div>
      <div class="col-md-2"> {{ momentjs(script.last_exec).calendar() }}</div>
      <div class="col-md-3"> {{ script.periodicity }} 
          {% if momentjs(script.last_exec).isNotPeriodic(script.periodicity) %}
          &nbsp;<span class="badge badge-warning">Periodicity not respected !</span>
          {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="/static/js/jquery-1.12.4.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/static/js/bootstrap.min.js"></script>
</body>

</html>
